import{m as V}from"./vuex.e580fdf2.js";import{r as d,x as u,G as h,D as r,I as g,A as l,B as c,Q as _,R as D,v as I,H as U}from"./@vue.6d92c876.js";import{_ as B}from"./index.ff105716.js";import"./axios.a2e7c818.js";import"./@google.3c047deb.js";import"./firebase.b6aa71ac.js";import"./@firebase.eb3d1888.js";import"./idb.13e98345.js";import"./tslib.3c1e63d7.js";import"./vue-router.cacd5158.js";import"./@egjs.49313d0a.js";import"./@cfcs.62ec6ef0.js";import"./@tiptap.58113168.js";import"./prosemirror-state.669ab027.js";import"./prosemirror-model.a115b74d.js";import"./orderedmap.20afc3da.js";import"./prosemirror-transform.3cf32640.js";import"./prosemirror-view.2d8901b7.js";import"./prosemirror-keymap.d8b22547.js";import"./w3c-keyname.a3821d5e.js";import"./prosemirror-commands.0a3dea2e.js";import"./prosemirror-schema-list.6d4dac38.js";import"./tippy.js.4b0d142c.js";import"./@popperjs.d3f73b18.js";const P={props:{dialog:{type:Boolean},vocaID:{type:String}},emits:["update:dialog","close"],data(){return{language:"japanese",title:"",content:"",share:!0,isEditMode:!1,file:null,coverURL:null}},created(){this.loadVoca()},methods:{...V({returnVocaByPayload:"vocas/returnVocaByPayload",updateVocaByPayload:"vocas/updateVocaByPayload",updateVocaImageByPayload:"vocaImages/updateVocaImageByPayload",deleteVocaImagesByPayload:"vocaImages/deleteVocaImagesByPayload",createVoca:"vocas/createVoca",updateVocaImage:"vocaImages/updateVocaImage"}),async loadVoca(){if(this.vocaID){this.isEditMode=!0;const t=await this.returnVocaByPayload(this.vocaID);t?(this.language=t.language,this.title=t.title,this.content=t.content,this.share=t.share,this.coverURL=t.coverURL):alert("\uB2E8\uC5B4\uC7A5\uC744 \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}},async handleUpdateVoca(){let t;this.file&&(t=await this.updateVocaImageByPayload({vocaID:this.vocaID,file:this.file}));const e={title:this.title,language:this.language,content:this.content,share:this.share,...t&&{coverURL:t}},s=Object.entries(e).reduce((n,[a,i])=>(i&&(n[a]=i),n),{});try{await this.updateVocaByPayload({vocaID:this.vocaID,payload:s}),this.closeForm()}catch(n){console.error("\uB2E8\uC5B4\uC7A5 \uC218\uC815 \uC911 \uC624\uB958 \uBC1C\uC0DD:",n),alert("\uB2E8\uC5B4\uC7A5 \uC218\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}},async handleDeleteCoverURL(){const e=Object.entries({coverURL:"null"}).reduce((s,[n,a])=>(a&&(s[n]=a),s),{});try{await this.updateVocaByPayload({vocaID:this.vocaID,payload:e}),await this.deleteVocaImagesByPayload(this.vocaID),this.loadVoca()}catch(s){console.error("\uB2E8\uC5B4\uC7A5 \uC218\uC815 \uC911 \uC624\uB958 \uBC1C\uC0DD:",s),alert("\uB2E8\uC5B4\uC7A5 \uC218\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}},handleFileUpload(t){this.file=t.target.files[0]},async handleCreateVoca(){try{await this.createVoca({language:this.language,title:this.title,content:this.content,share:this.share,file:this.file}),alert("\uB2E8\uC5B4\uC7A5\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.language="",this.title="",this.content="",this.share=!0,this.updateDialog(!1)}catch(t){console.error("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131 \uC911 \uC624\uB958 \uBC1C\uC0DD:",t),alert("\uB2E8\uC5B4\uC7A5 \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}},updateDialog(t){this.$emit("update:dialog",t)},closeForm(){this.$emit("close")},setShare(){this.share!=this.share}}},w={class:"content"},C=l("option",{value:"japanese"},[l("span",null,"japanese")],-1),x=l("option",{value:"english"},[l("span",null,"english")],-1),b=[C,x],k=l("div",{class:"font-size_14"}," \uACF5\uC720 ",-1),R={key:0},L=["src"],F=l("span",null,"\uC774\uBBF8\uC9C0 \uC0AD\uC81C",-1);function j(t,e,s,n,a,i){const m=d("buttonIcon"),p=d("textField"),y=d("buttonSwitch"),f=d("buttonDefault"),v=d("fullDialog");return u(),h(v,{title:a.isEditMode?"\uC554\uAE30\uC7A5 \uC218\uC815":"\uC554\uAE30\uC7A5 \uCD94\uAC00",dialog:s.dialog,"onUpdate:dialog":i.updateDialog},{header:r(()=>[a.isEditMode?(u(),h(m,{key:1,onClick:e[1]||(e[1]=o=>i.handleUpdateVoca())},{default:r(()=>[g("\uC218\uC815")]),_:1})):(u(),h(m,{key:0,onClick:e[0]||(e[0]=o=>i.handleCreateVoca())},{default:r(()=>[g("\uCD94\uAC00")]),_:1}))]),default:r(()=>[l("div",w,[c(p,null,{default:r(()=>[_(l("select",{style:{height:"40px"},class:"width_100","onUpdate:modelValue":e[2]||(e[2]=o=>a.language=o)},b,512),[[D,a.language]])]),_:1}),c(p,{modelValue:a.title,"onUpdate:modelValue":e[3]||(e[3]=o=>a.title=o),label:"\uB2E8\uC5B4\uC7A5 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694"},null,8,["modelValue"]),c(p,{modelValue:a.content,"onUpdate:modelValue":e[4]||(e[4]=o=>a.content=o),label:"\uB2E8\uC5B4\uC7A5 \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694"},null,8,["modelValue"]),l("div",{class:"display_flex align-items_center justify-content_space-between",onClick:e[6]||(e[6]=o=>i.setShare())},[k,c(y,{modelValue:a.share,"onUpdate:modelValue":e[5]||(e[5]=o=>a.share=o)},null,8,["modelValue"])])]),l("div",null,[l("input",{type:"file",id:"profilePicture",onChange:e[7]||(e[7]=(...o)=>i.handleFileUpload&&i.handleFileUpload(...o))},null,32)]),a.coverURL?(u(),I("div",R,[l("img",{src:a.coverURL,alt:"\uD504\uB85C\uD544 \uC774\uBBF8\uC9C0",style:{width:"100px",height:"100px"}},null,8,L),c(f,{onClick:i.handleDeleteCoverURL},{default:r(()=>[F]),_:1},8,["onClick"])])):U("",!0)]),_:1},8,["title","dialog","onUpdate:dialog"])}const ie=B(P,[["render",j]]);export{ie as default};
